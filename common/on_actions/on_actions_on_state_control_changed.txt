on_actions = {
	#ROOT is new controller #FROM is old controller #FROM.FROM is state ID
	on_state_control_changed = {
		effect = {
			log = "[GetDateText] [Root.GetName] on_state_control_changed OLD CONTROLLER: [From.GetName] STATE: [From.From.GetName]"
			### RUS/SOV control array
			if = {
				limit = {
					OR = {
						tag = RUS
						tag = SOV
					}
					NOT = { is_in_array = { ROOT.enemy_controlled_states = FROM.FROM } }
					FROM.FROM = {
						owner = { has_war_with = ROOT }
						OR = {
							is_on_continent = europe
							is_on_continent = middle_east
						}
					}
				}
				set_country_flag = has_enemy_control_array
				add_to_array = { ROOT.enemy_controlled_states = FROM.FROM }
			}

			### Russian event - "A New 1812/1328"
			if = {
				limit = {
					FROM = { tag = RUS }
					FROM.FROM = {
						OR = {
							state = 252
							state = 255
							state = 205
							state = 242
							state = 246
						}
					}
				}
			}

			### Clearing State Modifiers
			if = { #French Flanders state modifier
				limit = {
					ROOT = {
						980 = {
							has_state_flag = FLN_conscription_flag
						}
						controls_state = 980
						NOT = {
							tag = FLN
						}
					}
				}
				add_state_modifier = {
					modifier = {
						local_non_core_manpower = -0.18
					}
				}
			}
			if = { #French Flanders state modifier put back for FLN
				limit = {
					ROOT = {
						980 = {
							has_state_flag = FLN_conscription_flag
						}
						controls_state = 980
						tag = FLN
					}
				}
				add_state_modifier = {
					modifier = {
						local_non_core_manpower = 0.18
					}
				}
			}

			### Fixing state control when occupying occupied territory
			if = {
				limit = {
					FROM.FROM = {
						owner = {
							NOT = { tag = ROOT }
							OR = {
								is_in_faction_with = ROOT
								is_subject_of = ROOT
								ROOT = { is_subject_of = PREV }
							}
						}
					}
				}
				FROM.FROM = {
					owner = {
						set_state_controller = PREV
					}
				}
			}
		}
	}
}